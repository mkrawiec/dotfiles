#!/usr/bin/env bash

# This is a helper script to autofocus notifications from important programs
# Requires to be run as a deamon on linux with dbus and wmctrl
# @author mkrawiec

# Specify programs which notifications you want to listen
declare -ar LISTENED=('ScudCloud' 'California' 'Geary' 'Cantata')

# Declare action to be run on notification
declare -r ACTION='wmctrl -a'

# Concat listened programs
printf -v keys "%s\\|" "${LISTENED[@]}"

# Do the magic!
dbus-monitor --session interface='org.freedesktop.Notifications' |
grep --ignore-case --only --line-buffered $keys |
while read -r match; do
	eval "$ACTION $match"
done
